<!doctype html><html class="theme-next pisces" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css"><meta name="keywords" content="Hexo, NexT"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0"><meta name="description" content="activityactivity launchmode1.standard每次都是新的activity对象。2.singletop栈顶单例。特征：如果栈顶有此activity实例，当用startActivity调用此activity时，会复用这个activity，并调用onNewIntent() 刷新intent数据。应用场景：防止一个activity 显示多个实例。3.singleTask：栈单"><meta property="og:type" content="article"><meta property="og:title" content="android-c"><meta property="og:url" content="http://yoursite.com/2014/04/28/android-c/index.html"><meta property="og:site_name" content="200code"><meta property="og:description" content="activityactivity launchmode1.standard每次都是新的activity对象。2.singletop栈顶单例。特征：如果栈顶有此activity实例，当用startActivity调用此activity时，会复用这个activity，并调用onNewIntent() 刷新intent数据。应用场景：防止一个activity 显示多个实例。3.singleTask：栈单"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2018-09-22T02:27:35.287Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="android-c"><meta name="twitter:description" content="activityactivity launchmode1.standard每次都是新的activity对象。2.singletop栈顶单例。特征：如果栈顶有此activity实例，当用startActivity调用此activity时，会复用这个activity，并调用onNewIntent() 刷新intent数据。应用场景：防止一个activity 显示多个实例。3.singleTask：栈单"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",sidebar:{position:"left",display:"always"},fancybox:!1,motion:!1,duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://yoursite.com/2014/04/28/android-c/"><title>android-c | 200code</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?afd325d3333e718fc607b569c45d57a4";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div class="container one-collumn sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">200code</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/04/28/android-c/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="peter"><meta itemprop="description" content=""><meta itemprop="image" content="http://7xoxmg.com1.z0.glb.clouddn.com/avatar.jpg"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="200code"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="200code" src=""></span></span><header class="post-header"><h1 class="post-title" itemprop="name headline">android-c</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-04-28T11:45:07+08:00">2014-04-28</time></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="activity"><a href="#activity" class="headerlink" title="activity"></a>activity</h1><h2 id="activity-launchmode"><a href="#activity-launchmode" class="headerlink" title="activity launchmode"></a>activity launchmode</h2><h3 id="1-standard"><a href="#1-standard" class="headerlink" title="1.standard"></a>1.standard</h3><p>每次都是新的activity对象。</p><h3 id="2-singletop"><a href="#2-singletop" class="headerlink" title="2.singletop"></a>2.singletop</h3><p>栈顶单例。<br>特征：如果栈顶有此activity实例，当用startActivity调用此activity时，会复用这个activity，并调用onNewIntent() 刷新intent数据。<br>应用场景：防止一个activity 显示多个实例。</p><h3 id="3-singleTask："><a href="#3-singleTask：" class="headerlink" title="3.singleTask："></a>3.singleTask：</h3><p>栈单例。<br>特征：如果栈中有此activity实例，当用startActivity调用此activity时，会复用这个activity，通过clear掉此activity之上的所有activity的方式将此activity置于栈顶，并调用onNewIntent() 刷新intent数据。<br>应用场景：会被多个应用使用的app的main activity。<br>例子: 浏览器<br>操作：打开浏览器，输入某一网址，然后打开设置界面，按home键切出应用。点击微信，点击某一个网页消息进入，点击菜单，选使用浏览器打开。选择刚才的浏览器点击打开，此时会显示新的网页内容，点击back键会退出浏览器。相同的操作，用qq操作，结果一样。</p><h3 id="4-singleInstance："><a href="#4-singleInstance：" class="headerlink" title="4.singleInstance："></a>4.singleInstance：</h3><p>系统单例。<br>特征：如果栈中有此activity实例，当用startActivity调用此activity时，会复用这个activity，并调用onNewIntent() 刷新intent数据。<br>应用场景：和任何activity都没有逻辑关系（包括它所在的app）的activity<br>例子：闹钟<br>操作：打开闹钟设置界面，按home键进入微信，此时闹钟响了，进入闹钟提示界面，按返回键，回到微信界面。闹钟提示界面和任何app都没有逻辑关联，包括它自己所在的app。</p><h3 id="onNewintent"><a href="#onNewintent" class="headerlink" title="onNewintent()"></a>onNewintent()</h3><p>2，3，4 复用时会调用onNewintent（）</p><h2 id="application-task-activity-的关系？"><a href="#application-task-activity-的关系？" class="headerlink" title="application, task, activity 的关系？"></a>application, task, activity 的关系？</h2><p>task是任务的概念 本质是个栈 一个task任务对应一个acivity集合；通过配置activity的Android:taskAffinity来控制。<br>一个task中可以有多个应用的activity。<br>application是应用的概念，一个application可以有多个task任务（多个栈），默认的application里的activity都在一个栈中。</p><h2 id="task控制"><a href="#task控制" class="headerlink" title="task控制"></a>task控制</h2><p><a href="https://developer.android.com/guide/topics/manifest/activity-element.html#aff" target="_blank" rel="noopener">官方文档</a></p><h3 id="taskAffinity"><a href="#taskAffinity" class="headerlink" title="taskAffinity"></a>taskAffinity</h3><p>android:taskAffinity. 与 Activity 有着亲和关系的任务。从概念上讲，具有相同亲和关系的 Activity 归属同一任务（从用户的角度来看，则是归属同一“应用”）。 任务的亲和关系由其根 Activity 的亲和关系确定。</p><h3 id="android-allowTaskReparenting"><a href="#android-allowTaskReparenting" class="headerlink" title="android:allowTaskReparenting"></a>android:allowTaskReparenting</h3><p>是否允许此activity，回到原来的task栈中，认祖归宗（更贴切是含义，应该是该子任务是否允许被主任务认领）。 默认false，保留在启动task中。如一个应用启动了浏览器web页面activity，如果这个浏览器web页activity的allowTaskReparenting=true，这个应用退到后台（按home键），浏览器启动时会把这个web页面activity移到浏览器的栈中。<br>Activity 的亲和关系由 taskAffinity 属性定义。 任务的亲和关系通过读取其根 Activity 的亲和关系来确定。因此，按照定义，根 Activity 始终位于具有相同亲和关系的任务之中。 由于具有“singleTask”或“singleInstance”启动模式的 Activity 只能位于任务的根，因此更改父项仅限于“standard”和“singleTop”模式。</p><blockquote><p>注：<br>如果之前启动过浏览器activity，那在recenttask列表中切换回浏览器activity，不会reparent。<br>如果之前没有启动过浏览器activity，退出当前应用，或杀掉应用，再点击launcher icon 启动browser则不会reparent。<br>reparent的点：是调用应用在后台并且没有被回收，然后点击被调用activity应用(allowTaskReparenting=true)的launcher icon 才会reparent。</p></blockquote><h3 id="android-alwaysRetainTaskState"><a href="#android-alwaysRetainTaskState" class="headerlink" title="android:alwaysRetainTaskState"></a>android:alwaysRetainTaskState</h3><p>是否保持task状态，默认false，是否保留栈列表。true的话不会清除task列表。只适用于根activity，其他的Activity都会被忽略。如浏览器mainActivity设置。</p><h3 id="android-clearTaskOnLaunch"><a href="#android-clearTaskOnLaunch" class="headerlink" title="android:clearTaskOnLaunch"></a>android:clearTaskOnLaunch</h3><p>启动时是否清除task，默认false。只适用于根activity。不想保存task状态。</p><blockquote><p>注：<br>在recententtask列表中切换时不会clear。<br>点击home回到桌面，触发launcher的icon 图标启动时才会clear。</p></blockquote><h3 id="android-finishOnTaskLaunch"><a href="#android-finishOnTaskLaunch" class="headerlink" title="android:finishOnTaskLaunch"></a>android:finishOnTaskLaunch</h3><p>每当用户再次启动其任务（在主屏幕上选择任务）时，是否应销毁现有 Activity 实例</p><blockquote><p>注：<br>如果是true，无论是别的应用（别的task）调用，还是当前应用（相同task）应用调用。点击home，在桌面启动launcher icon时 都会销毁这个activity。</p></blockquote><h3 id="android-autoRemoveFromRecents"><a href="#android-autoRemoveFromRecents" class="headerlink" title="android:autoRemoveFromRecents"></a>android:autoRemoveFromRecents</h3><p>由具有该属性的 Activity 启动的任务是否一直保留在概览屏幕中，直至任务中的最后一个 Activity 完成为止。</p><blockquote><p>注：<br>用于root activity，当此应用退出后，recent task中不保留。</p></blockquote><h3 id="android-configChanges"><a href="#android-configChanges" class="headerlink" title="android:configChanges"></a>android:configChanges</h3><p>在Activity中添加了 android:configChanges属性，目的是当所指定属性(Configuration Changes)发生改变时，通知程序调用 onConfigurationChanged()函数。</p><h3 id="TaskAffinity"><a href="#TaskAffinity" class="headerlink" title="TaskAffinity"></a>TaskAffinity</h3><p>activity所在task栈的标记。是否属于某一逻辑关系task里。</p><h2 id="横竖屏名字"><a href="#横竖屏名字" class="headerlink" title="横竖屏名字"></a>横竖屏名字</h2><h3 id="横屏"><a href="#横屏" class="headerlink" title="横屏"></a>横屏</h3><p>landscape风景画。风景画都是横向的，如家里面曾经挂过的黄果树瀑布的那种。</p><h3 id="竖屏"><a href="#竖屏" class="headerlink" title="竖屏"></a>竖屏</h3><p>portrait肖像。肖像都是竖向的，如毛主席像。</p><h2 id="activity和dialog的关系"><a href="#activity和dialog的关系" class="headerlink" title="activity和dialog的关系"></a>activity和dialog的关系</h2><p>dialog的本质是个Window。<br>虽然dialog的构造函数是Context，但是显示是基于activity。<br>dialog的显示不会触发activity的任何生命周期回调函数。</p><h2 id="dialog的dismiss-和cancel-的区别"><a href="#dialog的dismiss-和cancel-的区别" class="headerlink" title="dialog的dismiss()和cancel()的区别"></a>dialog的dismiss()和cancel()的区别</h2><h3 id="dismiss-源码"><a href="#dismiss-源码" class="headerlink" title="dismiss() 源码"></a>dismiss() 源码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/**  </div><div class="line"> * Dismiss this dialog, removing it from the screen. This method can be  </div><div class="line"> * invoked safely from any thread.  Note that you should not override this  </div><div class="line"> * method to do cleanup when the dialog is dismissed, instead implement  </div><div class="line"> * that in &#123;@link #onStop&#125;.  </div><div class="line"> */  </div><div class="line">@Override  </div><div class="line">public void dismiss() &#123;  </div><div class="line">    if (Looper.myLooper() == mHandler.getLooper()) &#123;  </div><div class="line">        dismissDialog();  </div><div class="line">    &#125; else &#123;  </div><div class="line">        mHandler.post(mDismissAction);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="cancel-源码"><a href="#cancel-源码" class="headerlink" title="cancel() 源码"></a>cancel() 源码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/**  </div><div class="line"> * Cancel the dialog.  This is essentially the same as calling &#123;@link #dismiss()&#125;, but it will  </div><div class="line"> * also call your &#123;@link DialogInterface.OnCancelListener&#125; (if registered).  </div><div class="line"> */  </div><div class="line">public void cancel() &#123;  </div><div class="line">    if (!mCanceled &amp;&amp; mCancelMessage != null) &#123;  </div><div class="line">        mCanceled = true;  </div><div class="line">        // Obtain a new message so this dialog can be re-used  </div><div class="line">        Message.obtain(mCancelMessage).sendToTarget();  </div><div class="line">    &#125;  </div><div class="line">    dismiss();  </div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>从源码可以看出2个方法的效果一样都是让dialog消失， 只是cancel() 多了一个DialogInterface.OnCancelListener的回调。</p><h2 id="切换activity时他们的回调函数调用逻辑"><a href="#切换activity时他们的回调函数调用逻辑" class="headerlink" title="切换activity时他们的回调函数调用逻辑"></a>切换activity时他们的回调函数调用逻辑</h2><p>分别监听两个activity的 onCreate onStart onRestart onResume onPause onStop onDestroy 回调函数。<br><a href="http://download.csdn.net/detail/javalive09/6855725" target="_blank" rel="noopener">demo</a></p><h3 id="打开act1"><a href="#打开act1" class="headerlink" title="打开act1"></a>打开act1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">01-16 15:54:32.374: I/peter(13244): ACT1-onCreate  </div><div class="line">01-16 15:54:32.374: I/peter(13244): ACT1-onStart  </div><div class="line">01-16 15:54:32.374: I/peter(13244): ACT1-onResume</div></pre></td></tr></table></figure><h3 id="打开act2"><a href="#打开act2" class="headerlink" title="打开act2"></a>打开act2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">01-16 15:55:29.509: I/peter(13244): ACT1-onPause  </div><div class="line">01-16 15:55:29.524: I/peter(13244): ACT2-onCreate  </div><div class="line">01-16 15:55:29.524: I/peter(13244): ACT2-onStart  </div><div class="line">01-16 15:55:29.524: I/peter(13244): ACT2-onResume  </div><div class="line">01-16 15:55:29.604: I/peter(13244): ACT1-onStop</div></pre></td></tr></table></figure><h3 id="关闭act2"><a href="#关闭act2" class="headerlink" title="关闭act2"></a>关闭act2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">01-16 15:56:11.614: I/peter(13244): ACT2-onPause  </div><div class="line">01-16 15:56:11.639: I/peter(13244): ACT1-onRestart  </div><div class="line">01-16 15:56:11.639: I/peter(13244): ACT1-onStart  </div><div class="line">01-16 15:56:11.639: I/peter(13244): ACT1-onResume  </div><div class="line">01-16 15:56:16.714: I/peter(13244): ACT2-onStop  </div><div class="line">01-16 15:56:16.714: I/peter(13244): ACT2-onDestroy</div></pre></td></tr></table></figure><p>为什么会出现这种2个activity交叉调用的逻辑呢？<br>为什么不全部回调完当前的activity的函数。再回调要显示的activity函数。这样的逻辑不是更简单明了么。</p><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><p>增加动画显示的时间如：用5000毫秒来显示动画<br>执行上面的3 步骤时发现如下现象。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">01-16 16:07:01.544: I/peter(13244): ACT2-onPause  </div><div class="line">01-16 16:07:01.569: I/peter(13244): ACT1-onRestart  </div><div class="line">01-16 16:07:01.569: I/peter(13244): ACT1-onStart  </div><div class="line">01-16 16:07:01.569: I/peter(13244): ACT1-onResume</div></pre></td></tr></table></figure><p></p><p>过了很久直到动画显示完成才出现下面的log。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">01-16 16:07:06.649: I/peter(13244): ACT2-onStop  </div><div class="line">01-16 16:07:06.649: I/peter(13244): ACT2-onDestroy</div></pre></td></tr></table></figure><p></p><h3 id="结论-1"><a href="#结论-1" class="headerlink" title="结论"></a>结论</h3><p>activity支持动画切换造成了这种逻辑。<br>如果activity切换动画的时间很长。如果直接全部回调完当前的activity的函数。再回调要显示的activity函数。<br>会造成这种可能：当前的activity 它的ondestory() 被调用了。view 被虚拟机回收了。但是它还再做动画。这时null 空指针出现了。于是软件崩溃。</p><h2 id="同一个程序不同activity放入不同的栈中"><a href="#同一个程序不同activity放入不同的栈中" class="headerlink" title="同一个程序不同activity放入不同的栈中"></a>同一个程序不同activity放入不同的栈中</h2><p>intent中加入flag Intent.FLAG_ACTIVITY_NEW_TASK 标记。即可</p><h2 id="不同程序的activity放入同一个栈中"><a href="#不同程序的activity放入同一个栈中" class="headerlink" title="不同程序的activity放入同一个栈中"></a>不同程序的activity放入同一个栈中</h2><p>activity 标签中加入：<br>android:allowTaskReparenting=”true”<br>android:taskAffinity=”same”</p><h2 id="activity状态的保存"><a href="#activity状态的保存" class="headerlink" title="activity状态的保存"></a>activity状态的保存</h2><p>栈底的activity 在系统内存不足的时候会被回收，规则是越在栈底越容易被回收。那么再次启动activity的时候就会出现问题。<br>Android系统提供了activity状态保存的机制。</p><h3 id="保存"><a href="#保存" class="headerlink" title="保存"></a>保存</h3><p>重写onSaveInstanceState(Bundle outState) outState 保存状态值。</p><h3 id="获取"><a href="#获取" class="headerlink" title="获取"></a>获取</h3><p>重写onRestoreInstanceState(Bundle savedInstanceState)通过 savedInstanceState 或onCreate()中通过intent获取之前保存的值。</p><h2 id="splashview-闪屏界面实现的逻辑"><a href="#splashview-闪屏界面实现的逻辑" class="headerlink" title="splashview 闪屏界面实现的逻辑"></a>splashview 闪屏界面实现的逻辑</h2><p>Android 软件有时初始化时有耗时操作，很影响体验。一般的做法是加一层splash view。加载完成再进入操作界面。这样用户可以在体验上感觉更好一些。主要逻辑。<br>是在初始化耗时操作时，显示splash view。 耗时操作结束，显示操作界面。<br><a href="http://download.csdn.net/detail/javalive09/6852655" target="_blank" rel="noopener">demo</a><br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">@Override  </div><div class="line">protected void onCreate(Bundle savedInstanceState) &#123;  </div><div class="line">    super.onCreate(savedInstanceState);  </div><div class="line">      </div><div class="line">    setContentView(R.layout.splash);//闪屏界面  </div><div class="line">      </div><div class="line">    IdleHandler handler = new IdleHandler() &#123;  </div><div class="line">  </div><div class="line">        @Override  </div><div class="line">        public boolean queueIdle() &#123;  </div><div class="line">            setContentView(R.layout.activity_main);//操作界面  </div><div class="line">              </div><div class="line">            //long time consuming Operating  </div><div class="line">            longTime();//耗时操作  </div><div class="line">            return false;  </div><div class="line">        &#125;  </div><div class="line">          </div><div class="line">    &#125;;  </div><div class="line">    Looper.myQueue().addIdleHandler(handler);  </div><div class="line">      </div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h2 id="activity中addContentView和setContentView的区别"><a href="#activity中addContentView和setContentView的区别" class="headerlink" title="activity中addContentView和setContentView的区别"></a>activity中addContentView和setContentView的区别</h2><h3 id="setContentView"><a href="#setContentView" class="headerlink" title="setContentView"></a>setContentView</h3><p>逻辑在PhoneWindow 类中<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">@Override  </div><div class="line">public void setContentView(int layoutResID) &#123;  </div><div class="line">    if (mContentParent == null) &#123;  </div><div class="line">        installDecor();  </div><div class="line">    &#125; else &#123;  </div><div class="line">        mContentParent.removeAllViews();  </div><div class="line">    &#125;  </div><div class="line">    mLayoutInflater.inflate(layoutResID, mContentParent);  </div><div class="line">    final Callback cb = getCallback();  </div><div class="line">    if (cb != null &amp;&amp; !isDestroyed()) &#123;  </div><div class="line">        cb.onContentChanged();  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>如果多次调用setContentView ，则之后每次都会清空 mContentParent 容器。然后组装资源layoutResID。</p><h3 id="addContentView"><a href="#addContentView" class="headerlink" title="addContentView"></a>addContentView</h3><p>逻辑也在PhoneWindow 类中<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@Override  </div><div class="line">public void addContentView(View view, ViewGroup.LayoutParams params) &#123;  </div><div class="line">    if (mContentParent == null) &#123;  </div><div class="line">        installDecor();  </div><div class="line">    &#125;  </div><div class="line">    mContentParent.addView(view, params);  </div><div class="line">    final Callback cb = getCallback();  </div><div class="line">    if (cb != null &amp;&amp; !isDestroyed()) &#123;  </div><div class="line">        cb.onContentChanged();  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>如果多次调用addContentView ，则之后每次都会将view添加到mContentParent 容器中。最后产生view 的叠加效果。</p><h3 id="结论："><a href="#结论：" class="headerlink" title="结论："></a>结论：</h3><p>调用 setContentView 。设置时会清空容器再添加 view。无view叠加效果<br>调用addContentView 。直接添加到view容器中，有view叠加效果。</p><h2 id="隐式Intent"><a href="#隐式Intent" class="headerlink" title="隐式Intent"></a>隐式Intent</h2><h3 id="隐式intent的作用"><a href="#隐式intent的作用" class="headerlink" title="隐式intent的作用"></a>隐式intent的作用</h3><p>1.在不暴露类的情况下，可以让其他组件或程序调用此组组建（在filter中过滤相关intent，只有满足其条件才触发）。<br>2.注册给系统列表，使系统打开对应文件或链接时，该程序出现在打开列表中。如：浏览器，图片查看器。</p><h3 id="隐式intent的3个子节点"><a href="#隐式intent的3个子节点" class="headerlink" title="隐式intent的3个子节点"></a>隐式intent的3个子节点</h3><h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><p>最关键的一个表示行为的属性，如果要启用隐式意图，AndroidManifest.xml中filter的action集 中必须包含此action。</p><h4 id="category"><a href="#category" class="headerlink" title="category"></a>category</h4><p>对action的辅助说明。<br>如果启用隐式意图的intent对象中不写category，系统会加入默认的catagory：Android.intent.category.DEFAULT。AndroidManifest.xml中filter的category集合中必须包含<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;</div></pre></td></tr></table></figure><p></p><p>程序的入口activity除外。</p><h4 id="data"><a href="#data" class="headerlink" title="data"></a>data</h4><p>对action的辅助说明。data属性由两部分构成 ：数据URI 和 数据MIME type; data内容往往和action有关。</p><h2 id="IntentFilter-中-的android-priority-的含义"><a href="#IntentFilter-中-的android-priority-的含义" class="headerlink" title="IntentFilter 中 的android:priority 的含义"></a>IntentFilter 中 的android:priority 的含义</h2><p>关于priority 这个属性的描述 ，google 官方文档如下：<br><a href="http://developer.android.com/guide/topics/manifest/intent-filter-element.html" target="_blank" rel="noopener">官方文档</a><br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">android:priority  </div><div class="line">The priority that should be given to the parent component with regard to handling intents of the type described by the filter. This attribute has meaning for both activities and broadcast receivers:  </div><div class="line">It provides information about how able an activity is to respond to an intent that matches the filter, relative to other activities that could also respond to the intent. When an intent could be handled by multiple activities with different priorities, Android will consider only those with higher priority values as potential targets for the intent.  </div><div class="line">It controls the order in which broadcast receivers are executed to receive broadcast messages. Those with higher priority values are called before those with lower values. (The order applies only to synchronous messages; it&apos;s ignored for asynchronous messages.)  </div><div class="line">Use this attribute only if you really need to impose a specific order in which the broadcasts are received, or want to force Android to prefer one activity over others.  </div><div class="line"></div><div class="line">The value must be an integer, such as &quot;100&quot;. Higher numbers have a higher priority. The default value is 0. The value must be greater than -1000 and less than 1000.  </div><div class="line">  </div><div class="line">Also see setPriority().</div></pre></td></tr></table></figure><p></p><p>priority优先级仅用于描述控件的intent的filter的类型。这个属性只对activity和receivers是有意义的。priority 必须是整数，默认是0 范围是[-1000, 1000]</p><h3 id="隐式调用activity的情况"><a href="#隐式调用activity的情况" class="headerlink" title="隐式调用activity的情况"></a>隐式调用activity的情况</h3><p>如果多个activity 满足响应 的条件，系统只会触发 priority 高的那个activity。</p><h3 id="有序广播发出的情况"><a href="#有序广播发出的情况" class="headerlink" title="有序广播发出的情况"></a>有序广播发出的情况</h3><p>如果多个receiver满足响应的条件，系统会优先触发prioriyt搞的那个receiver。</p><h2 id="activity-ondestory-的调用时机"><a href="#activity-ondestory-的调用时机" class="headerlink" title="activity ondestory()的调用时机"></a>activity ondestory()的调用时机</h2><h3 id="调用finish"><a href="#调用finish" class="headerlink" title="调用finish()"></a>调用finish()</h3><h3 id="触发back键"><a href="#触发back键" class="headerlink" title="触发back键"></a>触发back键</h3><h3 id="触发home键，内存紧张。"><a href="#触发home键，内存紧张。" class="headerlink" title="触发home键，内存紧张。"></a>触发home键，内存紧张。</h3><h2 id="关闭activity的方法"><a href="#关闭activity的方法" class="headerlink" title="关闭activity的方法"></a>关闭activity的方法</h2><ol><li>点击back键</li><li>调用finish();</li><li>clear top的方式 startactivity<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Intent intent = new Intent(getActivity(), TrashClearMainAcitivity.class);  </div><div class="line">intent.putExtra(TrashClearMainAcitivity.CLEARTYPE, 1);  </div><div class="line">intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);  </div><div class="line">intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  </div><div class="line">Utils.startActivity(getActivity(), intent);</div></pre></td></tr></table></figure></li></ol><hr><h1 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h1><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>1.长期存在的后台操作（无界面交互）。<br>2.公用的（context 上下文对象都可以操作）。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>1.service默认和应用主线程在同一进程。<br>2.Android：process=“:xxx” service是应用程序私有的，并且自己单独处在一个进程。<br>3.android：process=“xxx” service是global的，并且自己单独处在一个进程。</p><h2 id="service重启"><a href="#service重启" class="headerlink" title="service重启"></a>service重启</h2><p>通过onStartCommand 方法的return 值来实现。<br>1.service.START_STICKY 被杀后重启。默认。<br>2.service.START_NO_STICKY 被杀后不重启。<br>3.service.START_REDELIVER_INTENT 被杀后重启。并传递 data intent。</p><h3 id="前台运行"><a href="#前台运行" class="headerlink" title="前台运行"></a>前台运行</h3><p>startForeGround<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Notification note = new Notification(R.drawable.ic_launcher, &quot;Video Service&quot;,</div><div class="line">        System.currentTimeMillis());</div><div class="line">note.setLatestEventInfo(this, &quot;Video Service&quot;, null, null);</div><div class="line">note.flags = Notification.FLAG_NO_CLEAR;</div><div class="line">startForeground(1, note);</div></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Notification.Builder builder = new Notification.Builder(this.getApplicationContext());</div><div class="line">builder.setLargeIcon(BitmapFactory.decodeResource(this.getResources(), R.drawable.ic_launcher))</div><div class="line">        .setContentTitle(getString(R.string.tcp_content_title))</div><div class="line">        .setSmallIcon(R.drawable.ic_launcher)</div><div class="line">        .setContentText(getString(R.string.tcp_content_txt))</div><div class="line">        .setWhen(System.currentTimeMillis());</div><div class="line">Intent resultIntent = new Intent(this, MainActivity.class);</div><div class="line">TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);</div><div class="line">stackBuilder.addNextIntent(resultIntent);</div><div class="line">PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);</div><div class="line">builder.setContentIntent(resultPendingIntent);</div><div class="line">Notification notification = builder.build();</div><div class="line">startForeground(110, notification);</div></pre></td></tr></table></figure><h2 id="IntentService的应用场景"><a href="#IntentService的应用场景" class="headerlink" title="IntentService的应用场景"></a>IntentService的应用场景</h2><p>开启一个新的IntentService 就会在它内部新建一个Thread 并在其上加了一个Looper。执行完毕后自动关闭service。<br>IntentService 被用于执行需要排队执行的一串耗时操作。<br>IntentService应用的关键点是Looper。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">public class SendKeyCodeService extends IntentService &#123;</div><div class="line"></div><div class="line">    private static final String NAME = &quot;keycode&quot;;</div><div class="line"></div><div class="line">    public static final String KEYCODE = &quot;send_keycode&quot;;</div><div class="line"></div><div class="line">    private static final String PATH_KEY_FILE = &quot;/sys/class/mac_accessory/virtual_key/send_virtual_key&quot;;</div><div class="line"></div><div class="line">    public SendKeyCodeService() &#123;</div><div class="line">        super(NAME);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onHandleIntent(Intent intent) &#123;</div><div class="line">        int keyCode = intent.getIntExtra(KEYCODE, 0);</div><div class="line">        if(keyCode != 0) &#123;</div><div class="line">            sendKey(keyCode);</div><div class="line">        &#125;</div><div class="line">        try &#123;</div><div class="line">            Thread.sleep(200);</div><div class="line">        &#125; catch (InterruptedException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void sendKey(int keyCode) &#123;</div><div class="line">        try &#123;</div><div class="line">            PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter(PATH_KEY_FILE, true)));</div><div class="line">            out.println(keyCode);</div><div class="line">            out.close();</div><div class="line">        &#125; catch (IOException e) &#123;</div><div class="line">            //exception handling left as an exercise for the reader</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h2 id="Service和activity如何通讯"><a href="#Service和activity如何通讯" class="headerlink" title="Service和activity如何通讯"></a>Service和activity如何通讯</h2><h3 id="本地Service"><a href="#本地Service" class="headerlink" title="本地Service"></a>本地Service</h3><h4 id="1-通过startService-intent。"><a href="#1-通过startService-intent。" class="headerlink" title="1. 通过startService intent。"></a>1. 通过startService intent。</h4><h4 id="2-通过bindeService-中间类binder-获取service引用来调用。"><a href="#2-通过bindeService-中间类binder-获取service引用来调用。" class="headerlink" title="2. 通过bindeService 中间类binder 获取service引用来调用。"></a>2. 通过bindeService 中间类binder 获取service引用来调用。</h4><h4 id="3-通过broadcast广播-intent。"><a href="#3-通过broadcast广播-intent。" class="headerlink" title="3. 通过broadcast广播 intent。"></a>3. 通过broadcast广播 intent。</h4><h3 id="远程Service"><a href="#远程Service" class="headerlink" title="远程Service"></a>远程Service</h3><h4 id="1-通过startService-intent。-1"><a href="#1-通过startService-intent。-1" class="headerlink" title="1. 通过startService intent。"></a>1. 通过startService intent。</h4><h4 id="2-通过bindeService-然后使用AIDL进行相互通讯-demo"><a href="#2-通过bindeService-然后使用AIDL进行相互通讯-demo" class="headerlink" title="2. 通过bindeService 然后使用AIDL进行相互通讯 demo"></a>2. 通过bindeService 然后使用AIDL进行相互通讯 <a href="https://github.com/javalive09/IPC-demo" target="_blank" rel="noopener">demo</a></h4><h5 id="写aidl文件，定义要通讯的接口。"><a href="#写aidl文件，定义要通讯的接口。" class="headerlink" title="写aidl文件，定义要通讯的接口。"></a>写aidl文件，定义要通讯的接口。</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">interface IMyAidlInterface &#123;</div><div class="line">   String getName();</div><div class="line">&#125;</div></pre></td></tr></table></figure><h5 id="service-中提供aidl定义接口xxx-stub-的实现类。"><a href="#service-中提供aidl定义接口xxx-stub-的实现类。" class="headerlink" title="service 中提供aidl定义接口xxx.stub 的实现类。"></a>service 中提供aidl定义接口xxx.stub 的实现类。</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">public class MyService extends Service &#123;</div><div class="line"></div><div class="line">    public MyService() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public IBinder onBind(Intent intent) &#123;</div><div class="line">        return new MyBinder();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    class MyBinder extends IMyAidlInterface.Stub &#123;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public String getName() throws RemoteException &#123;</div><div class="line">            return &quot;test&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>c. acivity 获取xxx接口引用<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">public class MainActivity extends AppCompatActivity &#123;</div><div class="line"></div><div class="line">    private IMyAidlInterface iMyAidlInterface;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        bindService(new Intent(&quot;cc.abto.server&quot;), new ServiceConnection()&#123;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void onServiceConnected(ComponentName name, IBinder service) &#123;</div><div class="line"></div><div class="line">                iMyAidlInterface = IMyAidlInterface.Stub.asInterface(service);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void onServiceDisconnected(ComponentName name) &#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;, BIND_AUTO_CREATE);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void onClick(View view) &#123;</div><div class="line">        try &#123;</div><div class="line">            Toast.makeText(MainActivity.this, iMyAidlInterface.getName(), Toast.LENGTH_SHORT).show();</div><div class="line">        &#125; catch (RemoteException e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h4 id="3-通过broadcast广播-intent。-1"><a href="#3-通过broadcast广播-intent。-1" class="headerlink" title="3. 通过broadcast广播 intent。"></a>3. 通过broadcast广播 intent。</h4><h4 id="4-通过messager通信-最方便-demo"><a href="#4-通过messager通信-最方便-demo" class="headerlink" title="4. 通过messager通信(最方便)demo"></a>4. 通过messager通信(最方便)<a href="https://github.com/javalive09/IPC-demo" target="_blank" rel="noopener">demo</a></h4><h5 id="service-构建messager"><a href="#service-构建messager" class="headerlink" title="service 构建messager"></a>service 构建messager</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">public class MyService extends Service &#123;</div><div class="line"></div><div class="line">    public final static String TAG = &quot;MyService&quot;;</div><div class="line"></div><div class="line">    public final static int SERVICEID = 0x0001;</div><div class="line">    private Messenger messenger = new Messenger(new Handler() &#123;</div><div class="line">        @Override</div><div class="line">        public void handleMessage(Message msg) &#123;</div><div class="line">            super.handleMessage(msg);</div><div class="line">            if (msg.arg1 == SERVICEID) &#123;</div><div class="line">              	//接受从客户端传来的消息</div><div class="line">                Log.d(TAG, &quot;客服端传来的消息===&gt;&gt;&gt;&gt;&gt;&gt;&quot;);</div><div class="line">                String str = (String) msg.getData().get(&quot;content&quot;);</div><div class="line">                Log.d(TAG, str);</div><div class="line"></div><div class="line">                //发送数据给客户端</div><div class="line">                Message msgTo = Message.obtain();</div><div class="line">                msgTo.arg1 = 0X0002;</div><div class="line">                Bundle bundle = new Bundle();</div><div class="line">                bundle.putString(&quot;content&quot;, &quot;我是从服务器来的字符串&quot;);</div><div class="line">                msgTo.setData(bundle);</div><div class="line">                try &#123;</div><div class="line">                    //注意，这里把数据从服务器发出了</div><div class="line">                    msg.replyTo.send(msgTo);</div><div class="line">                &#125; catch (RemoteException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onCreate() &#123;</div><div class="line">        super.onCreate();</div><div class="line">        Log.i(TAG, &quot;onCreat&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public IBinder onBind(Intent intent) &#123;</div><div class="line">        return messenger.getBinder();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h5 id="activity-构建messager"><a href="#activity-构建messager" class="headerlink" title="activity 构建messager"></a>activity 构建messager</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">public class MainActivity extends AppCompatActivity &#123;</div><div class="line"></div><div class="line">     public final static String TAG = &quot;MainActivity&quot;;</div><div class="line">     public final static int ACTIVITYID = 0X0002;</div><div class="line">     //客户端的Messnger</div><div class="line">     private Messenger aMessenger = new Messenger(new Handler() &#123;</div><div class="line">         @Override</div><div class="line">         public void handleMessage(Message msg) &#123;</div><div class="line">             super.handleMessage(msg);</div><div class="line">             if (msg.arg1 == ACTIVITYID) &#123;</div><div class="line">              //客户端接受服务端传来的消息</div><div class="line">                 Log.d(TAG, &quot;服务端传来了消息=====&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;);</div><div class="line">                 String str = (String) msg.getData().get(&quot;content&quot;);</div><div class="line">                 Log.d(TAG, str);</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">     &#125;);</div><div class="line"></div><div class="line">    //服务端传来的Messenger</div><div class="line">     Messenger sMessenger;</div><div class="line"></div><div class="line">     ServiceConnection serviceConnection = new ServiceConnection() &#123;</div><div class="line">         @Override</div><div class="line">         public void onServiceConnected(ComponentName name, IBinder service) &#123;</div><div class="line">             sMessenger = new Messenger(service);</div><div class="line"></div><div class="line">             Message message = Message.obtain();</div><div class="line">             message.arg1 = 0x0001;</div><div class="line">             //注意这里，把Activity的Messenger赋值给了message中，当然可能你已经发现这个就是Service中我们调用的msg.replyTo了。</div><div class="line">             message.replyTo = aMessenger;</div><div class="line"></div><div class="line">             Bundle bundle = new Bundle();</div><div class="line">             bundle.putString(&quot;content&quot;, &quot;我就是Activity传过来的字符串&quot;);</div><div class="line">             message.setData(bundle);</div><div class="line"></div><div class="line">             try &#123;</div><div class="line">               //消息从客户端发出</div><div class="line">                 sMessenger.send(message);</div><div class="line">             &#125; catch (RemoteException e) &#123;</div><div class="line">                 e.printStackTrace();</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line"></div><div class="line">         @Override</div><div class="line">         public void onServiceDisconnected(ComponentName name) &#123;</div><div class="line">             Log.e(TAG, &quot;连接Service失败&quot;);</div><div class="line">         &#125;</div><div class="line">     &#125;;</div><div class="line"></div><div class="line">     @Override</div><div class="line">     protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">         super.onCreate(savedInstanceState);</div><div class="line">         setContentView(R.layout.activity_main);</div><div class="line">         startAndBindService();</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     private void startAndBindService() &#123;</div><div class="line">         Intent service = new Intent(MainActivity.this, MyService.class);</div><div class="line">         startService(service);</div><div class="line">         bindService(service, serviceConnection, Context.BIND_AUTO_CREATE);</div><div class="line">     &#125;</div><div class="line"></div><div class="line"> &#125;</div></pre></td></tr></table></figure><hr><h1 id="BroadcastReceiver"><a href="#BroadcastReceiver" class="headerlink" title="BroadcastReceiver"></a>BroadcastReceiver</h1><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><h3 id="根据注册方式："><a href="#根据注册方式：" class="headerlink" title="根据注册方式："></a>根据注册方式：</h3><p>1.代码注册<br>2.manifest文件注册</p><h3 id="按是否有序："><a href="#按是否有序：" class="headerlink" title="按是否有序："></a>按是否有序：</h3><p>1.有序广播，如短信，电话。 Android:priority = “1000” (-1000 ~ 1000) 由高到低 可以拦截广播。<br>2.无序广播，无优先级。</p><blockquote><p>注：广播启动activity必须加入FLAG_ACTIVITY_NEW_TASK标记。</p></blockquote><h2 id="本地广播"><a href="#本地广播" class="headerlink" title="本地广播"></a>本地广播</h2><h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LocalBroadcastManager.getInstance(this).registerReceiver(receiver, intentFilter);</div></pre></td></tr></table></figure><h3 id="取消注册"><a href="#取消注册" class="headerlink" title="取消注册"></a>取消注册</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LocalBroadcastManager.getInstance(this).unregisterReceiver(receiver);</div></pre></td></tr></table></figure><h3 id="发送广播"><a href="#发送广播" class="headerlink" title="发送广播"></a>发送广播</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LocalBroadcastManager.getInstance(context).sendBroadcast(new Intent(MyCastReceiver.ACTION));</div></pre></td></tr></table></figure><h1 id="进程的优先级"><a href="#进程的优先级" class="headerlink" title="进程的优先级"></a>进程的优先级</h1><h2 id="1-前台进程"><a href="#1-前台进程" class="headerlink" title="1.前台进程"></a>1.前台进程</h2><p>正交互的前台显示的进程。</p><h2 id="2-可见进程"><a href="#2-可见进程" class="headerlink" title="2.可见进程"></a>2.可见进程</h2><p>半透明的activity后面的activity。</p><h2 id="3-服务进程"><a href="#3-服务进程" class="headerlink" title="3.服务进程"></a>3.服务进程</h2><p>service</p><h2 id="4-后台进程"><a href="#4-后台进程" class="headerlink" title="4.后台进程"></a>4.后台进程</h2><p>按下Home键</p><h2 id="5-Empty进程"><a href="#5-Empty进程" class="headerlink" title="5.Empty进程"></a>5.Empty进程</h2><p>按下back键</p><hr><h1 id="Android-中的一些时间"><a href="#Android-中的一些时间" class="headerlink" title="Android 中的一些时间"></a>Android 中的一些时间</h1><h2 id="1-Toast-NotificationManagerService-java"><a href="#1-Toast-NotificationManagerService-java" class="headerlink" title="1. Toast  (NotificationManagerService.java)"></a>1. Toast (NotificationManagerService.java)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Toast.LENGTH_SHORT  2000ms // 2秒</div><div class="line">Toast.LENGTH_LONG    3500ms // 3.5秒</div></pre></td></tr></table></figure><h2 id="2-ANR-ActivityManagerService-java"><a href="#2-ANR-ActivityManagerService-java" class="headerlink" title="2. ANR   (ActivityManagerService.java)"></a>2. ANR (ActivityManagerService.java)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">KeyDispatchTimeout   KEY_DISPATCHING_TIMEOUT = 5 * 1000  // 5 秒</div><div class="line">BroadcastTimeout     BROADCAST_FG_TIMEOUT = 10 * 1000     // 10 秒</div><div class="line">ServiceTimeout       // 20 秒</div></pre></td></tr></table></figure><hr><h1 id="android中如何调用已经安装的某个应用"><a href="#android中如何调用已经安装的某个应用" class="headerlink" title="android中如何调用已经安装的某个应用"></a>android中如何调用已经安装的某个应用</h1><h2 id="1-使用logcat过滤出-ActivityManager的log"><a href="#1-使用logcat过滤出-ActivityManager的log" class="headerlink" title="1.使用logcat过滤出 ActivityManager的log"></a>1.使用logcat过滤出 ActivityManager的log</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">adb -s logcat | grep &quot;ActivityManager&quot;</div></pre></td></tr></table></figure><h2 id="2-点击应用icon-触发应用"><a href="#2-点击应用icon-触发应用" class="headerlink" title="2.点击应用icon 触发应用"></a>2.点击应用icon 触发应用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">I/ActivityManager(  449): START u0 &#123;act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.calendar/.AllInOneActivity&#125; from pid 5180  </div><div class="line">cmp = com.android.calendar/.AllInOneActivity    是包名和启动类的名字</div></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><h3 id="1-根据包名和触发类的intent启动："><a href="#1-根据包名和触发类的intent启动：" class="headerlink" title="1. 根据包名和触发类的intent启动："></a>1. 根据包名和触发类的intent启动：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">intent = new Intent();  </div><div class="line">intent.setClassName(&quot;com.android.calendar&quot;,  </div><div class="line">        &quot;com.android.calendar.AllInOneActivity&quot;);  </div><div class="line">startActivity(intent);</div></pre></td></tr></table></figure><h3 id="2-根据包名使用activitymanager-启动："><a href="#2-根据包名使用activitymanager-启动：" class="headerlink" title="2. 根据包名使用activitymanager 启动："></a>2. 根据包名使用activitymanager 启动：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">intent = this.getPackageManager().getLaunchIntentForPackage(  </div><div class="line">        &quot;com.android.calendar&quot;);  </div><div class="line">if (intent != null) &#123;  </div><div class="line">    startActivity(intent);  </div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h1 id="手机序列号和IMEI号的区别"><a href="#手机序列号和IMEI号的区别" class="headerlink" title="手机序列号和IMEI号的区别"></a>手机序列号和IMEI号的区别</h1><h2 id="手机序列号："><a href="#手机序列号：" class="headerlink" title="手机序列号："></a>手机序列号：</h2><p>SN码是Serial Number的缩写，有时也叫SerialNo，也就是产品序列号，产品序列是为了验证“产品的合法身份”而引入的一个概念，它是用来保障用<br>户的正 版权益，享受合法服务的；一套正版的产品只对应一组产品序列号。别称：机器码、认证码、注册申请码等。</p><h2 id="IMEI"><a href="#IMEI" class="headerlink" title="IMEI:"></a>IMEI:</h2><p>IMEI（International Mobile Equipment Identity）是移动设备国际身份码的缩写。<br>IMEI码由GSM（Global System for Mobile Communications，全球移动通信协会）统一分配，授权BABT（British approvals Board of Telecommunications，英国通信认证管理委员会）审受。<br>IMEI 的主要用途是提供信息给网络系统，让系统知道哪个手机在收发信号。主要目的是防止被窃的手机登入网络并监听防止手机使用者任意干扰网络。</p><hr><h1 id="getDimension-getDimensionPixelOffset-getDimensionPixelSize-的区别"><a href="#getDimension-getDimensionPixelOffset-getDimensionPixelSize-的区别" class="headerlink" title="getDimension(), getDimensionPixelOffset(), getDimensionPixelSize()的区别"></a>getDimension(), getDimensionPixelOffset(), getDimensionPixelSize()的区别</h1><p>Resources中的这三个方法很让人迷惑。究竟有什么区别。</p><h2 id="1-getDimension"><a href="#1-getDimension" class="headerlink" title="1. getDimension()"></a>1. getDimension()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">public float getDimension(int id) throws NotFoundException &#123;  </div><div class="line">    synchronized (mTmpValue) &#123;  </div><div class="line">        TypedValue value = mTmpValue;  </div><div class="line">        getValue(id, value, true);  </div><div class="line">        if (value.type == TypedValue.TYPE_DIMENSION) &#123;  </div><div class="line">            return TypedValue.complexToDimension(value.data, mMetrics);  </div><div class="line">        &#125;  </div><div class="line">        throw new NotFoundException(  </div><div class="line">                &quot;Resource ID #0x&quot; + Integer.toHexString(id) + &quot; type #0x&quot;  </div><div class="line">                + Integer.toHexString(value.type) + &quot; is not valid&quot;);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p>最终会调用TypedValue.complexToDimension()<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">public static float complexToDimension(int data, DisplayMetrics metrics) &#123;  </div><div class="line">    return applyDimension(  </div><div class="line">        (data&gt;&gt;COMPLEX_UNIT_SHIFT)&amp;COMPLEX_UNIT_MASK,  </div><div class="line">        complexToFloat(data),  </div><div class="line">        metrics);  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h2 id="2-getDimensionPixelOffset"><a href="#2-getDimensionPixelOffset" class="headerlink" title="2. getDimensionPixelOffset()"></a>2. getDimensionPixelOffset()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public int getDimensionPixelOffset(int id) throws NotFoundException &#123;  </div><div class="line">    synchronized (mTmpValue) &#123;  </div><div class="line">        TypedValue value = mTmpValue;  </div><div class="line">        getValue(id, value, true);  </div><div class="line">        if (value.type == TypedValue.TYPE_DIMENSION) &#123;  </div><div class="line">            return TypedValue.complexToDimensionPixelOffset(  </div><div class="line">                    value.data, mMetrics);  </div><div class="line">        &#125;  </div><div class="line">        throw new NotFoundException(  </div><div class="line">                &quot;Resource ID #0x&quot; + Integer.toHexString(id) + &quot; type #0x&quot;  </div><div class="line">                + Integer.toHexString(value.type) + &quot; is not valid&quot;);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p>最终会调用TypedValue.complexToDimensionPixelOffset()<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public static int complexToDimensionPixelOffset(int data,  </div><div class="line">        DisplayMetrics metrics) &#123;  </div><div class="line">    return (int)applyDimension(  </div><div class="line">            (data&gt;&gt;COMPLEX_UNIT_SHIFT)&amp;COMPLEX_UNIT_MASK,  </div><div class="line">            complexToFloat(data),  </div><div class="line">            metrics);  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h2 id="3-complexToDimensionPixelSize"><a href="#3-complexToDimensionPixelSize" class="headerlink" title="3. complexToDimensionPixelSize()"></a>3. complexToDimensionPixelSize()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public int getDimensionPixelSize(int id) throws NotFoundException &#123;  </div><div class="line">    synchronized (mTmpValue) &#123;  </div><div class="line">        TypedValue value = mTmpValue;  </div><div class="line">        getValue(id, value, true);  </div><div class="line">        if (value.type == TypedValue.TYPE_DIMENSION) &#123;  </div><div class="line">            return TypedValue.complexToDimensionPixelSize(  </div><div class="line">                    value.data, mMetrics);  </div><div class="line">        &#125;  </div><div class="line">        throw new NotFoundException(  </div><div class="line">                &quot;Resource ID #0x&quot; + Integer.toHexString(id) + &quot; type #0x&quot;  </div><div class="line">                + Integer.toHexString(value.type) + &quot; is not valid&quot;);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p>最终会调用TypedValue.complexToDimensionPixelSize()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public static int complexToDimensionPixelSize(int data,  </div><div class="line">        DisplayMetrics metrics) &#123;  </div><div class="line">    final float value = complexToFloat(data);  </div><div class="line">    final float f = applyDimension(  </div><div class="line">            (data&gt;&gt;COMPLEX_UNIT_SHIFT)&amp;COMPLEX_UNIT_MASK,  </div><div class="line">            value,  </div><div class="line">            metrics);  </div><div class="line">    final int res = (int)(f+0.5f);  </div><div class="line">    if (res != 0) return res;  </div><div class="line">    if (value == 0) return 0;  </div><div class="line">    if (value &gt; 0) return 1;  </div><div class="line">    return -1;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="结论-2"><a href="#结论-2" class="headerlink" title="结论"></a>结论</h2><p>这3个方法在resources.Java中逻辑一致，只是最终调用的方法有所不同对比3个方法可以发现<br>getDimension() 返回值是的float大小。<br>getDimensionPixelOffset() 返回值是将 getDimension() 强转成int 的值。（强转）<br>getDimensionPixelSize() 返回值是将getDimension()+0.5 再强转成int的值。（4舍5入）<br>这3个方法的本质区别就是大小精确度的差别。想要大一点就用getDimensionPixelSize(), 想要精确点就用getDimension(), 想要小一点就用getDimensionPixelOffset()</p><hr><h1 id="TargetApi的作用"><a href="#TargetApi的作用" class="headerlink" title="@TargetApi的作用"></a>@TargetApi的作用</h1><h2 id="官方文档描述"><a href="#官方文档描述" class="headerlink" title="官方文档描述"></a>官方文档描述</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">As you can see, lint now has a database of the full Android API such that it knows precisely which version each API call was introduced in. If it detects that you are attempting to call a method which is not available in all versions you are trying to support, it will warn you with messages like the above.</div></pre></td></tr></table></figure><p>正如你所看到的, lint现 在有完整的Android API的一个数据库,这样它清楚地知道哪个版本的哪一个API调用了。如果它检测到你正试图调用一个方法不是在所有版本都可用，那么它将提醒给你上面的消息。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Of course, if you&apos;re building your project with the same version of Android as your oldest support version, the compiler will complain if it finds an API call it can&apos;t resolve. However, that approach has some downsides. In particular, you may want to access newer APIs on platforms where they are available. If you&apos;re compiling against the oldest version of the platform, you would need to use reflection to access all the new APIs, which can be really cumbersome, especially if you have a lot of code using the newer APIs.</div><div class="line">The way most developers get around this is to actually use a newer build target, which means you can access all the new APIs directly. You then add some code checks to make sure that the code path which calls the newer APIs is only reached when running on a version which supports it.</div></pre></td></tr></table></figure><p></p><p>当然,如果您编译的项目的版本和支持的最低支持的版本相同, 编译器会提示找不到相关API。然而,这种方法有一些缺点。特别是,您可能希望访问新的平台上可用的api。如果你对老版本的编译平台,您将需要使用反射来访问所有的新api,可真的麻烦,特别是如果你有很多的代码使用新的api。</p><p>实际上大多数开发人员解决这个问题的方法是使用更高的版本来编译这个项目,这意味着您可以直接访问所有的新api。然后添加一些代码检查,以确保调用的代码路径上运行时达成的新api只是一个版本支持它。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">However, when you do this you run the risk of accidentally calling newer APIs, and that&apos;s what Lint now helps you detect.</div><div class="line">What about code where you are deliberately calling newer APIs from a class you know will only be loaded in the right circumstances? In that case you can &quot;mark&quot; the code as targeting a newer version of the API. Simply annotate the code with the new @TargetApiannotation:</div></pre></td></tr></table></figure><p>然而,当你这么做了,那么在低版本上调用新的api可能会有崩溃的风险, 这就是lint检测提示的作用之所在。<br>那么如何保证你调用的新的api的代码的相关类只会在合适的版本下才加载? 在这种情况下你可以“标注”目标的代码的所在版本的API。简单的注释代码@TargetApi</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">If the whole class is targeting newer APIs, you can place the annotation on the class instead:</div></pre></td></tr></table></figure><p>如果整个类都是新的api的版本，你就可以把@Target标注移除掉。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>综上，@Target的作用在于提示：使用高编译版本的代码，为了通用性兼容运行此代码的低版本平台。要求程序员做出区分对待的加载。</p><h1 id="任务调度的几种方法"><a href="#任务调度的几种方法" class="headerlink" title="任务调度的几种方法"></a>任务调度的几种方法</h1><h2 id="Timer"><a href="#Timer" class="headerlink" title="Timer"></a>Timer</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">public class Timer_ extends Entry &#123;</div><div class="line"></div><div class="line">    Timer timer = new Timer();</div><div class="line">    long delay = 1000; // milliseconds</div><div class="line">    long period = 1000; // milliseconds</div><div class="line">    int count = 0;</div><div class="line"></div><div class="line">    public void schedule() &#123;</div><div class="line">        timer.schedule(new TimerTask() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                LogUtil.i(&quot;count =&quot; + count++);</div><div class="line">            &#125;</div><div class="line">        &#125;, delay, period);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void cancel() &#123;</div><div class="line">        timer.cancel();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="ScheduledExecutorService"><a href="#ScheduledExecutorService" class="headerlink" title="ScheduledExecutorService"></a>ScheduledExecutorService</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">public class ScheduledExecutorService_ extends Entry &#123;</div><div class="line"></div><div class="line">    ScheduledExecutorService service = Executors.newScheduledThreadPool(10);</div><div class="line">    long delay = 1000; // milliseconds</div><div class="line">    long period = 1000; // milliseconds</div><div class="line">    int count = 0;</div><div class="line"></div><div class="line">    public void schedule() &#123;</div><div class="line">        service.scheduleAtFixedRate(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                LogUtil.i(&quot;count =&quot; + count++);</div><div class="line">            &#125;</div><div class="line">        &#125;, delay, period, TimeUnit.MILLISECONDS);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void cancel() &#123;</div><div class="line">        service.shutdownNow();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="Cron4j"><a href="#Cron4j" class="headerlink" title="Cron4j"></a>Cron4j</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">public class Cron4j_ extends Entry &#123;</div><div class="line"></div><div class="line">    private Scheduler scheduler = new Scheduler();</div><div class="line">    private String schedulingPattern1 = &quot;30 10 * * *&quot;; // 10:30  everyday</div><div class="line">    private String schedulingPattern2 = &quot;* * * * *&quot;; // every minute</div><div class="line">    private int count =0;</div><div class="line"></div><div class="line">    public void schedule() &#123;</div><div class="line">        scheduler.schedule(schedulingPattern2, new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                LogUtil.i(&quot;count =&quot; + count++);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        scheduler.start();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void cancel() &#123;</div><div class="line">        scheduler.stop();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="AlarmManager"><a href="#AlarmManager" class="headerlink" title="AlarmManager"></a>AlarmManager</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">public class AlarmClock extends Entry &#123;</div><div class="line"></div><div class="line">    private static final int INTERVAL = 1000 * 60 * 60 * 24;// 24h</div><div class="line"></div><div class="line">    public void setClock() &#123;</div><div class="line">        Intent intent = new Intent(getActivity(), AlarmClockReceiver.class);</div><div class="line">        intent.setAction(&quot;abc&quot;);</div><div class="line">        PendingIntent sender = PendingIntent.getBroadcast(getActivity(),</div><div class="line">                1, intent, PendingIntent.FLAG_CANCEL_CURRENT);</div><div class="line"></div><div class="line">        // Schedule the alarm!</div><div class="line">        AlarmManager am = (AlarmManager) getActivity().getSystemService(Context.ALARM_SERVICE);</div><div class="line">        Calendar calendar = Calendar.getInstance();</div><div class="line">        calendar.set(Calendar.HOUR_OF_DAY, 17);</div><div class="line">        calendar.set(Calendar.MINUTE, 52);</div><div class="line">        calendar.set(Calendar.SECOND, 1);</div><div class="line">        calendar.set(Calendar.MILLISECOND, 1);</div><div class="line"></div><div class="line">        long time = calendar.getTimeInMillis();</div><div class="line">        long t = System.currentTimeMillis();</div><div class="line">        am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, time, INTERVAL, sender);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></div><div></div><div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2014/04/17/正则表达式/" rel="next" title="正则表达式"><i class="fa fa-chevron-left"></i> 正则表达式</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2014/04/28/android-m/" rel="prev" title="android-m">android-m <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"></div><div class="ds-thread" data-thread-key="<%- page.path %>" data-title="<%- page.title %>" data-url="<%- page.permalink %>"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview">站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="http://7xoxmg.com1.z0.glb.clouddn.com/avatar.jpg" alt="peter"><p class="site-author-name" itemprop="name">peter</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">日志</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/javalive09" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub </a></span><span class="links-of-author-item"><a href="http://stackoverflow.com/users/4674672/peter-zhang" target="_blank" title="S.O."><i class="fa fa-fw fa-stack-overflow"></i> S.O. </a></span><span class="links-of-author-item"><a href="/sites" target="_blank" title="在线工具集"><i class="fa fa-fw fa-globe"></i> 在线工具集</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#activity"><span class="nav-number">1.</span> <span class="nav-text">activity</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#activity-launchmode"><span class="nav-number">1.1.</span> <span class="nav-text">activity launchmode</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-standard"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.standard</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-singletop"><span class="nav-number">1.1.2.</span> <span class="nav-text">2.singletop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-singleTask："><span class="nav-number">1.1.3.</span> <span class="nav-text">3.singleTask：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-singleInstance："><span class="nav-number">1.1.4.</span> <span class="nav-text">4.singleInstance：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#onNewintent"><span class="nav-number">1.1.5.</span> <span class="nav-text">onNewintent()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#application-task-activity-的关系？"><span class="nav-number">1.2.</span> <span class="nav-text">application, task, activity 的关系？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#task控制"><span class="nav-number">1.3.</span> <span class="nav-text">task控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#taskAffinity"><span class="nav-number">1.3.1.</span> <span class="nav-text">taskAffinity</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android-allowTaskReparenting"><span class="nav-number">1.3.2.</span> <span class="nav-text">android:allowTaskReparenting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android-alwaysRetainTaskState"><span class="nav-number">1.3.3.</span> <span class="nav-text">android:alwaysRetainTaskState</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android-clearTaskOnLaunch"><span class="nav-number">1.3.4.</span> <span class="nav-text">android:clearTaskOnLaunch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android-finishOnTaskLaunch"><span class="nav-number">1.3.5.</span> <span class="nav-text">android:finishOnTaskLaunch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android-autoRemoveFromRecents"><span class="nav-number">1.3.6.</span> <span class="nav-text">android:autoRemoveFromRecents</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android-configChanges"><span class="nav-number">1.3.7.</span> <span class="nav-text">android:configChanges</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TaskAffinity"><span class="nav-number">1.3.8.</span> <span class="nav-text">TaskAffinity</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#横竖屏名字"><span class="nav-number">1.4.</span> <span class="nav-text">横竖屏名字</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#横屏"><span class="nav-number">1.4.1.</span> <span class="nav-text">横屏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#竖屏"><span class="nav-number">1.4.2.</span> <span class="nav-text">竖屏</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#activity和dialog的关系"><span class="nav-number">1.5.</span> <span class="nav-text">activity和dialog的关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dialog的dismiss-和cancel-的区别"><span class="nav-number">1.6.</span> <span class="nav-text">dialog的dismiss()和cancel()的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#dismiss-源码"><span class="nav-number">1.6.1.</span> <span class="nav-text">dismiss() 源码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cancel-源码"><span class="nav-number">1.6.2.</span> <span class="nav-text">cancel() 源码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结论"><span class="nav-number">1.6.3.</span> <span class="nav-text">结论</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#切换activity时他们的回调函数调用逻辑"><span class="nav-number">1.7.</span> <span class="nav-text">切换activity时他们的回调函数调用逻辑</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#打开act1"><span class="nav-number">1.7.1.</span> <span class="nav-text">打开act1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打开act2"><span class="nav-number">1.7.2.</span> <span class="nav-text">打开act2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关闭act2"><span class="nav-number">1.7.3.</span> <span class="nav-text">关闭act2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#验证"><span class="nav-number">1.7.4.</span> <span class="nav-text">验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结论-1"><span class="nav-number">1.7.5.</span> <span class="nav-text">结论</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#同一个程序不同activity放入不同的栈中"><span class="nav-number">1.8.</span> <span class="nav-text">同一个程序不同activity放入不同的栈中</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#不同程序的activity放入同一个栈中"><span class="nav-number">1.9.</span> <span class="nav-text">不同程序的activity放入同一个栈中</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#activity状态的保存"><span class="nav-number">1.10.</span> <span class="nav-text">activity状态的保存</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#保存"><span class="nav-number">1.10.1.</span> <span class="nav-text">保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取"><span class="nav-number">1.10.2.</span> <span class="nav-text">获取</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#splashview-闪屏界面实现的逻辑"><span class="nav-number">1.11.</span> <span class="nav-text">splashview 闪屏界面实现的逻辑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#activity中addContentView和setContentView的区别"><span class="nav-number">1.12.</span> <span class="nav-text">activity中addContentView和setContentView的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#setContentView"><span class="nav-number">1.12.1.</span> <span class="nav-text">setContentView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#addContentView"><span class="nav-number">1.12.2.</span> <span class="nav-text">addContentView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结论："><span class="nav-number">1.12.3.</span> <span class="nav-text">结论：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#隐式Intent"><span class="nav-number">1.13.</span> <span class="nav-text">隐式Intent</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#隐式intent的作用"><span class="nav-number">1.13.1.</span> <span class="nav-text">隐式intent的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐式intent的3个子节点"><span class="nav-number">1.13.2.</span> <span class="nav-text">隐式intent的3个子节点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#action"><span class="nav-number">1.13.2.1.</span> <span class="nav-text">action</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#category"><span class="nav-number">1.13.2.2.</span> <span class="nav-text">category</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#data"><span class="nav-number">1.13.2.3.</span> <span class="nav-text">data</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IntentFilter-中-的android-priority-的含义"><span class="nav-number">1.14.</span> <span class="nav-text">IntentFilter 中 的android:priority 的含义</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#隐式调用activity的情况"><span class="nav-number">1.14.1.</span> <span class="nav-text">隐式调用activity的情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有序广播发出的情况"><span class="nav-number">1.14.2.</span> <span class="nav-text">有序广播发出的情况</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#activity-ondestory-的调用时机"><span class="nav-number">1.15.</span> <span class="nav-text">activity ondestory()的调用时机</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#调用finish"><span class="nav-number">1.15.1.</span> <span class="nav-text">调用finish()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#触发back键"><span class="nav-number">1.15.2.</span> <span class="nav-text">触发back键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#触发home键，内存紧张。"><span class="nav-number">1.15.3.</span> <span class="nav-text">触发home键，内存紧张。</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关闭activity的方法"><span class="nav-number">1.16.</span> <span class="nav-text">关闭activity的方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Service"><span class="nav-number">2.</span> <span class="nav-text">Service</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#应用场景"><span class="nav-number">2.1.</span> <span class="nav-text">应用场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用"><span class="nav-number">2.2.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#service重启"><span class="nav-number">2.3.</span> <span class="nav-text">service重启</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#前台运行"><span class="nav-number">2.3.1.</span> <span class="nav-text">前台运行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IntentService的应用场景"><span class="nav-number">2.4.</span> <span class="nav-text">IntentService的应用场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Service和activity如何通讯"><span class="nav-number">2.5.</span> <span class="nav-text">Service和activity如何通讯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#本地Service"><span class="nav-number">2.5.1.</span> <span class="nav-text">本地Service</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-通过startService-intent。"><span class="nav-number">2.5.1.1.</span> <span class="nav-text">1. 通过startService intent。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-通过bindeService-中间类binder-获取service引用来调用。"><span class="nav-number">2.5.1.2.</span> <span class="nav-text">2. 通过bindeService 中间类binder 获取service引用来调用。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-通过broadcast广播-intent。"><span class="nav-number">2.5.1.3.</span> <span class="nav-text">3. 通过broadcast广播 intent。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#远程Service"><span class="nav-number">2.5.2.</span> <span class="nav-text">远程Service</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-通过startService-intent。-1"><span class="nav-number">2.5.2.1.</span> <span class="nav-text">1. 通过startService intent。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-通过bindeService-然后使用AIDL进行相互通讯-demo"><span class="nav-number">2.5.2.2.</span> <span class="nav-text">2. 通过bindeService 然后使用AIDL进行相互通讯 demo</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#写aidl文件，定义要通讯的接口。"><span class="nav-number">2.5.2.2.1.</span> <span class="nav-text">写aidl文件，定义要通讯的接口。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#service-中提供aidl定义接口xxx-stub-的实现类。"><span class="nav-number">2.5.2.2.2.</span> <span class="nav-text">service 中提供aidl定义接口xxx.stub 的实现类。</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-通过broadcast广播-intent。-1"><span class="nav-number">2.5.2.3.</span> <span class="nav-text">3. 通过broadcast广播 intent。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-通过messager通信-最方便-demo"><span class="nav-number">2.5.2.4.</span> <span class="nav-text">4. 通过messager通信(最方便)demo</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#service-构建messager"><span class="nav-number">2.5.2.4.1.</span> <span class="nav-text">service 构建messager</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#activity-构建messager"><span class="nav-number">2.5.2.4.2.</span> <span class="nav-text">activity 构建messager</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BroadcastReceiver"><span class="nav-number">3.</span> <span class="nav-text">BroadcastReceiver</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#分类"><span class="nav-number">3.1.</span> <span class="nav-text">分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#根据注册方式："><span class="nav-number">3.1.1.</span> <span class="nav-text">根据注册方式：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#按是否有序："><span class="nav-number">3.1.2.</span> <span class="nav-text">按是否有序：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#本地广播"><span class="nav-number">3.2.</span> <span class="nav-text">本地广播</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#注册"><span class="nav-number">3.2.1.</span> <span class="nav-text">注册</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#取消注册"><span class="nav-number">3.2.2.</span> <span class="nav-text">取消注册</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#发送广播"><span class="nav-number">3.2.3.</span> <span class="nav-text">发送广播</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#进程的优先级"><span class="nav-number">4.</span> <span class="nav-text">进程的优先级</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-前台进程"><span class="nav-number">4.1.</span> <span class="nav-text">1.前台进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-可见进程"><span class="nav-number">4.2.</span> <span class="nav-text">2.可见进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-服务进程"><span class="nav-number">4.3.</span> <span class="nav-text">3.服务进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-后台进程"><span class="nav-number">4.4.</span> <span class="nav-text">4.后台进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Empty进程"><span class="nav-number">4.5.</span> <span class="nav-text">5.Empty进程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Android-中的一些时间"><span class="nav-number">5.</span> <span class="nav-text">Android 中的一些时间</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Toast-NotificationManagerService-java"><span class="nav-number">5.1.</span> <span class="nav-text">1. Toast (NotificationManagerService.java)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-ANR-ActivityManagerService-java"><span class="nav-number">5.2.</span> <span class="nav-text">2. ANR (ActivityManagerService.java)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#android中如何调用已经安装的某个应用"><span class="nav-number">6.</span> <span class="nav-text">android中如何调用已经安装的某个应用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-使用logcat过滤出-ActivityManager的log"><span class="nav-number">6.1.</span> <span class="nav-text">1.使用logcat过滤出 ActivityManager的log</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-点击应用icon-触发应用"><span class="nav-number">6.2.</span> <span class="nav-text">2.点击应用icon 触发应用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#启动"><span class="nav-number">6.3.</span> <span class="nav-text">启动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-根据包名和触发类的intent启动："><span class="nav-number">6.3.1.</span> <span class="nav-text">1. 根据包名和触发类的intent启动：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-根据包名使用activitymanager-启动："><span class="nav-number">6.3.2.</span> <span class="nav-text">2. 根据包名使用activitymanager 启动：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#手机序列号和IMEI号的区别"><span class="nav-number">7.</span> <span class="nav-text">手机序列号和IMEI号的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#手机序列号："><span class="nav-number">7.1.</span> <span class="nav-text">手机序列号：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IMEI"><span class="nav-number">7.2.</span> <span class="nav-text">IMEI:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#getDimension-getDimensionPixelOffset-getDimensionPixelSize-的区别"><span class="nav-number">8.</span> <span class="nav-text">getDimension(), getDimensionPixelOffset(), getDimensionPixelSize()的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-getDimension"><span class="nav-number">8.1.</span> <span class="nav-text">1. getDimension()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-getDimensionPixelOffset"><span class="nav-number">8.2.</span> <span class="nav-text">2. getDimensionPixelOffset()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-complexToDimensionPixelSize"><span class="nav-number">8.3.</span> <span class="nav-text">3. complexToDimensionPixelSize()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结论-2"><span class="nav-number">8.4.</span> <span class="nav-text">结论</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TargetApi的作用"><span class="nav-number">9.</span> <span class="nav-text">@TargetApi的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#官方文档描述"><span class="nav-number">9.1.</span> <span class="nav-text">官方文档描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">9.2.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#任务调度的几种方法"><span class="nav-number">10.</span> <span class="nav-text">任务调度的几种方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Timer"><span class="nav-number">10.1.</span> <span class="nav-text">Timer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ScheduledExecutorService"><span class="nav-number">10.2.</span> <span class="nav-text">ScheduledExecutorService</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cron4j"><span class="nav-number">10.3.</span> <span class="nav-text">Cron4j</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AlarmManager"><span class="nav-number">10.4.</span> <span class="nav-text">AlarmManager</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">peter</span></div><div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div><div class="theme-info">主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script><script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid="></script></body></html>